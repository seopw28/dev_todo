# 개발 일지 - 2025-11-02

## 주요 개발 내용 요약

### 1. 탭 구조 변경
- **변경**: "전체", "활성", "완료" → "할일", "완료", "휴지통"
- **목적**: 더 직관적인 UI와 휴지통 기능 분리

### 2. 휴지통 기능 구현
- **구현 내용**:
  - `deleted` 필드로 삭제된 항목 관리
  - 휴지통 탭에서 삭제된 항목만 표시
  - 휴지통에서 완전 삭제 기능
  - "휴지통 비우기" 버튼 추가
  
### 3. 삭제 로직 개선
- **할일/완료 탭**: 확인 없이 바로 휴지통으로 이동
- **휴지통 탭**: 확인 후 완전 삭제
- 휴지통 항목은 완료/수정 불가 처리

### 4. 커스텀 모달 구현
- **변경**: 브라우저 기본 `confirm()` → 다크 모드 커스텀 모달
- **기능**: 
  - 배경 블러 효과
  - ESC 키/배경 클릭으로 취소
  - Promise 기반 비동기 처리
  - 애니메이션 효과

### 5. 렌더링 최적화
- **문제**: 할일 추가 시 반짝임 현상
- **해결**:
  - Debounce 적용 (50ms 내 연속 렌더링 묶음)
  - HTML 캐싱으로 불필요한 DOM 업데이트 방지
  - `requestAnimationFrame`으로 렌더링 사이클 최적화
  - CSS 애니메이션(`slideIn`) 제거

### 6. UI 개선
- 휴지통 탭 활성 시 파란색 밑줄 제거 (`border-bottom-color: transparent`)
- 드래그 앤 드롭 기능 제거 (작동 불안정)
- 클릭 이벤트 단순화 (상세 페이지 열기만 유지)

---

## 기술적 변경 사항

### 파일 변경
- `index.html`: 탭 구조 변경, 커스텀 모달 추가
- `script-firestore.js`: 
  - 필터링 로직 개선 (`getFilteredTodos`)
  - 삭제 로직 분리 (`deleteTodo`)
  - 휴지통 비우기 함수 추가 (`emptyTrash`)
  - 커스텀 모달 함수 추가 (`showModal`)
  - 렌더링 최적화 (`debouncedRenderTodos`, HTML 캐싱)
  - 드래그 앤 드롭 기능 제거
- `style.css`: 
  - 모달 스타일 추가
  - 탭 활성 상태 스타일 수정
  - 드래그 관련 스타일 제거

### Firestore 스키마
- `deleted`: boolean (휴지통 관리)
- `deletedAt`: timestamp (삭제 시각)

---

## 추가 개발 내용 (후반부)

### 7. Font Awesome 아이콘 라이브러리 통합
- **목적**: 이모지 대신 고품질 아이콘 사용
- **구현**:
  - Font Awesome 6.5.1 CDN 추가 (모든 HTML 파일)
  - 네비게이션 아이콘 교체: 📝→`fa-clipboard-list`, 💖→`fa-heart`, 🌤️→`fa-cloud-sun`
  - To Do 페이지 버튼 아이콘: ✎→`fa-pencil-alt`, 🗑→`fa-trash`
  - 설정 버튼: ⚙️→`fa-cog`
  - 캐릭터 선택 바 아이콘도 Font Awesome으로 자동 변환
- **파일**: `index.html`, `weather/index.html`, `chiko/index.html`, `chiko/script.js`, `script-firestore.js`, `style.css`, `chiko/style.css`

### 8. 치코 AI 채팅 서비스 구현
- **기능**: Gemini API를 활용한 1:1 AI 채팅 서비스
- **구현 내용**:
  - Gemini 2.5 Flash 모델 사용
  - 시스템 프롬프트를 통한 캐릭터 설정
  - API 키 관리 시스템 (기본 키 + 사용자 개인 키)
  - 설정 모달을 통한 API 키 입력
  - localStorage에 개인 키 저장
- **파일**: `chiko/index.html`, `chiko/style.css`, `chiko/script.js`, `chiko/config.js`

### 9. 캐릭터 모드 시스템
- **구현**: 4가지 캐릭터 모드 제공
  - 연인: 로맨틱한 분위기
  - 비서: 극존칭 사용
  - 의사: 전문적 의료 조언
  - 친구: 편안한 반말 톤
- **기능**:
  - 캐릭터 선택 바 UI (가로 스크롤)
  - 선택된 캐릭터에 따른 시스템 프롬프트 자동 변경
  - localStorage에 선택 저장
  - 캐릭터별 인사 메시지 자동 변경
- **파일**: `chiko/characters.js`, `chiko/script.js`, `chiko/style.css`

### 10. 역할별 배경 이미지 시스템
- **구현**: Unsplash Source를 활용한 동적 배경 이미지
- **특징**:
  - API 키 불필요, 바로 사용 가능
  - 역할별 적절한 이미지 자동 로드
  - 투명도 15%로 텍스트 가독성 유지
  - 부드러운 전환 애니메이션 (0.5s)
- **배경 매핑**:
  - 연인: 로맨틱/핑크 계열
  - 비서: 사무실/블루 계열
  - 의사: 병원/화이트 계열
  - 친구: 웃음/그린 계열
- **파일**: `chiko/style.css`, `chiko/script.js`, `chiko/background-images.md`

### 11. 네비게이션 개선
- **순서 변경**: To Do | 치코 | 날씨 → **날씨 | 치코 | To Do**
- **아이콘 개선**: 모든 페이지에 Font Awesome 아이콘 적용
- **아이콘 변경**: 치코 아이콘 🐱 → 💖 (하트)

### 12. 문서화
- **생성 파일**:
  - `icons-setup.md`: 아이콘 라이브러리 가이드
  - `chiko/API_SETUP.md`: Gemini API 설정 가이드
  - `chiko/background-images.md`: 무료 배경 이미지 소스 가이드

---

## 기술 스택 추가
- **Font Awesome 6.5.1**: 아이콘 라이브러리 (CDN)
- **Gemini API 2.5 Flash**: AI 채팅 모델
- **Unsplash Source**: 무료 배경 이미지

---

## 추가 개발 내용 (최근 업데이트)

### 13. To Do 페이지 UI 개선
- **완료/휴지통 탭 입력 UI 제거**: 
  - 할일 탭에서만 입력 필드와 + 버튼 표시
  - 완료 탭과 휴지통 탭에서는 입력 UI 숨김
- **빈 상태 메시지 일관성**: 
  - 휴지통 탭: "삭제된 메모가 없습니다." → "삭제된 To Do가 없습니다."
- **토스트 팝업 개선**:
  - 너비 증가: min-width 300px → 320px, max-width 400px → 500px
  - 표시 시간: 1초 → 1.5초로 변경
  - 단어 단위 줄바꿈 (`word-break: keep-all`) 적용
- **파일**: `script-firestore.js`, `style.css`

### 14. 대화(치코) 페이지 메시지 삭제 기능
- **길게 누르기 삭제**:
  - 사용자 메시지와 AI 메시지 모두 삭제 가능
  - 길게 누르는 시간: 0.7초
  - 삭제 확인 모달 표시 후 삭제 실행
- **삭제 확인 모달 레이아웃**:
  - 상단: 취소(좌측) | 확인(우측) 버튼 가로 배치
  - 하단: "현 채팅방 초기화" 버튼 전체 너비
- **채팅방 초기화 기능**:
  - 현재 캐릭터의 모든 채팅 히스토리 삭제
  - localStorage에서 해당 캐릭터의 데이터 제거
  - 인사 메시지만 남기고 화면 초기화
- **시각적 피드백**:
  - 모든 메시지에 포인터 커서 적용
  - 텍스트 선택 방지 (`user-select: none`)
  - 삭제 시 페이드아웃 애니메이션
- **파일**: `chiko/script.js`, `chiko/style.css`, `chiko/index.html`

### 15. 폰트 및 타이포그래피 개선
- **Pretendard 폰트 적용**: 
  - Toss, Gmarket Sans와 유사한 모던 폰트
  - 모든 페이지에 일괄 적용
  - CDN: `cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9`
- **타이포그래피 정제**:
  - 폰트 크기, 줄 간격, 자간 조정
  - 헤더, 본문, 모달, 토스트 등 모든 요소에 적용
- **파일**: `index.html`, `weather/index.html`, `chiko/index.html`, `style.css`, `weather/style.css`, `chiko/style.css`

### 16. 날씨 페이지 아이콘 개선
- **Font Awesome 날씨 아이콘**:
  - 기존 정적 이미지 → Font Awesome 동적 아이콘
  - 날씨 조건에 따른 아이콘 자동 변경
  - 시간대별 아이콘 (낮: 태양, 밤: 달)
  - 아이콘 색상 자동 조정 (태양: 노란색, 비: 파란색 등)
- **함수**:
  - `getWeatherIconClass()`: 날씨 조건 → Font Awesome 클래스 매핑
  - `getWeatherIconColor()`: 아이콘 클래스 → 색상 매핑
- **파일**: `weather/script.js`, `weather/style.css`, `weather/index.html`

